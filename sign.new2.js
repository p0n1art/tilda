function tma__sign__init(i,t){"login"===i&&t&&document.location.replace("/members/");t=document.getElementById("allrecords").getAttribute("data-tilda-project-id")||"",t=JSON.stringify({projectid:t});tma__request("https://members2.tildacdn.com/api/getstyles/",t,"",function(t){if("ok"===t.status&&"object"==typeof t.data){var e=t.data;if(window.tildaMembers.settingStyles=t.data,"login"===i)tma__sign__drawLogin();else if("signup"===i){if(!window.tildaMembers.settingStyles.allowselfreg)return void document.location.replace("/members/login");tma__sign__drawSignup()}else"recover-password"===i&&tma__sign__drawRecoverPassword();document.querySelector(".tlk-bg-filter")||tma__sign__drawBGSign(e)}})}function tma__sign__drawLogin(){var t=tma__checkContainerDiv("tlk-form");t.innerHTML=tma__sign__getLoginHtml(),document.title=tma__sign__dict("form_login_title_page");var e=document.getElementById("form-login"),i=e.querySelector('button[type="submit"]');tma__sign__addRouteEvents(t,tma__sign__dict("form_login_title")),e.addEventListener("submit",function(t){t.preventDefault(),t.stopPropagation(),tma__resetErrorFields(e),tma__resetErrorRequest(e);t=tma__validationFormFields(e);0<t.length?tma__showErrorFields(e,t,tma__sign__dict):tma__sign__sendFormLogin(e,i)})}function tma__sign__drawSignup(){var t=tma__checkContainerDiv("tlk-form"),e=document.getElementById("allrecords").getAttribute("data-tilda-project-id")||"",i=tma__getPath();t.innerHTML=tma__sign__getSignupHtml(),document.title=tma__sign__dict("form_signup_title_page");var r=document.getElementById("form-signup");tma__sign__addRouteEvents(t,tma__sign__dict("form_signup_title")),tma__sign__addButtonShowHidePasswordEvents(),"group"===i[2]&&i[3]&&(i=JSON.stringify({projectid:e,grouphash:i[3]}),tma__request("https://members2.tildacdn.com/api/getregistrationgroup/",i,"",function(t){var e;"ok"===t.status&&"object"==typeof t.data&&((e=document.querySelector(".tlk-form__sup-text")).innerHTML=t.data.name,e.style.display="block")})),r.addEventListener("submit",function(t){t.preventDefault(),t.stopPropagation(),tma__resetErrorFields(r),tma__resetErrorRequest(r);t=tma__validationFormFields(r);0<t.length?tma__showErrorFields(r,t,tma__sign__dict):tma__sign__drawRecaptcha()}),window.onmessage=function(t){tma__sing__sendFormSignup(t)}}function tma__sing__sendFormSignup(t){var e=document.getElementById("allrecords").getAttribute("data-tilda-project-id")||"",i=document.getElementById("form-signup"),r=document.querySelector(".tlk-recaptcha");if(r){var s=r.querySelector(".tlk-recaptcha__reg-captcha"),a=i.querySelector('button[type="submit"]'),_=tma__serializeArray(i),o=tma__getPath(),n=tma__getProfileObjFromLS();if(s.contentWindow.postMessage("tilda-reset","*"),tma__sign__сloseRecaptcha(r),_.projectid=e,_.rkey=t.data,"group"===o[2]&&o[3]){_.grouphash=o[3];try{n&&n.token&&(_.token=n.token)}catch(t){}}_=JSON.stringify(_),tma__request("https://members2.tildacdn.com/api/registration/",_,a,function(t){var e;"ok"===t.status&&"object"==typeof t.data?n&&n.token?document.location.replace("/members/"):(e=!1,t.data.redirect&&(e=t.data.redirect),tma__sign__sendFormLogin(i,a,e)):tma__showErrorRequest(i,t.code,tma__sign__dict,"signup")})}}function tma__sign__sendFormLogin(r,s,a){var _=document.getElementById("allrecords").getAttribute("data-tilda-project-id")||"",t=tma__serializeArray(r);t.projectid=_,t.pageurl=document.location.href,t=JSON.stringify(t),tma__request("https://members2.tildacdn.com/api/login/",t,s,function(t){var i,e;"ok"===t.status&&"object"==typeof t.data?(i=t.data.token,e=JSON.stringify({projectid:_,token:i}),tma__request("https://members2.tildacdn.com/api/getprofile/",e,s,function(t){var e;"ok"===t.status&&"object"==typeof t.data?(e="tilda_members_profile"+_,localStorage.clear(),t.data.token=i,t.data.projectid=_,localStorage.setItem(e,JSON.stringify(t.data)),localStorage.setItem(e+"_timestamp",Math.floor(Date.now()/1e3)),a?document.location.replace("/"+a):0===t.data.courses.length&&1===t.data.groups.length&&t.data.groups[0]&&t.data.groups[0].homepage&&t.data.groups[0].index&&"0"!==t.data.groups[0].homepage?document.location.replace("/"+t.data.groups[0].index):document.location.replace("/members/")):tma__showErrorRequest(r,t.code,tma__sign__dict)})):"login_blocked"===t.code?t.hours?tma__showErrorRequest(r,t.code,tma__sign__dict,"login",{min:t.hours+" "+tma__sign__dict("login_blocked_hours")}):tma__showErrorRequest(r,t.code,tma__sign__dict,"login",{min:t.minutes+" "+tma__sign__dict("login_blocked_min")}):tma__showErrorRequest(r,t.code,tma__sign__dict,"login")})}function tma__sign__drawRecoverPassword(){var t=tma__checkContainerDiv("tlk-form");t.innerHTML=tma__sign__getRecoverPasswordHtml(),document.title=tma__sign__dict("form_rec_password_title_page");var e=document.getElementById("form-recover-password");tma__sign__addRouteEvents(t,tma__sign__dict("form_rec_password_title")),e.addEventListener("submit",function(t){t.preventDefault(),t.stopPropagation(),tma__resetErrorFields(e),tma__resetErrorRequest(e);t=tma__validationFormFields(e);0<t.length?tma__showErrorFields(e,t,tma__sign__dict):tma__sign__drawRecaptcha()}),window.onmessage=function(t){tma__sign__sendFormRecoverPassword(t)}}function tma__sign__sendFormRecoverPassword(t){var e,i,r,s=document.getElementById("allrecords").getAttribute("data-tilda-project-id")||"",a=document.getElementById("form-recover-password"),_=document.querySelector(".tlk-form"),o=document.querySelector(".tlk-recaptcha");o&&(e=o.querySelector(".tlk-recaptcha__reg-captcha"),i=a.querySelector('button[type="submit"]'),r=tma__serializeArray(a),e.contentWindow.postMessage("tilda-reset","*"),tma__sign__сloseRecaptcha(o),r.projectid=s,r.rkey=t.data,r=JSON.stringify(r),tma__request("https://members2.tildacdn.com/api/recoverpassword/",r,i,function(t){"ok"===t.status?(_.innerHTML=tma__sign__getRecoverPasswordSuccessHtml(),tma__sign__addRouteEvents(_,tma__sign__dict("form_signup_title"))):tma__showErrorRequest(a,t.code,tma__sign__dict,"rec_password")}))}function tma__sign__getLoginHtml(){var t="";return t+='<div class="tlk-form__container">',t+='<div class="tlk-form__title">'+tma__sign__dict("form_login_title")+"</div>",window.tildaMembers.settingStyles&&window.tildaMembers.settingStyles.logolink&&(t+='<div class="tlk-form__image">',t+='<a href="/">',t+='<img src="'+window.tildaMembers.settingStyles.logolink+'">',t+="</a>",t+="</div>"),t+='<form method="post" id="form-login" action="/">',t+='<div class="tlk-form__wrap">',t+='<div class="tlk-form__item">',t+='<div class="tlk-input-title">'+tma__sign__dict("form_login_field_email")+"</div>",t+='<input type="text" name="login" placeholder="'+tma__sign__dict("form_login_placeholder_email")+'" class="tlk-input" required>',t+='<div class="tlk-input-error"></div>',t+="</div>",t+='<div class="tlk-form__item">',t+='<div class="tlk-input-title">'+tma__sign__dict("form_login_field_password")+"</div>",t+='<input type="password" name="password" placeholder="'+tma__sign__dict("form_login_placeholder_password")+'" class="tlk-input" required>',t+='<div class="tlk-input-error"></div>',t+="</div>",t+="</div>",t+='<div class="tlk-input-error tlk-input-error_all"></div>',t+='<div class="tlk-form__submit-wrap">',t+='<div class="tlk-form__submit-btn">',t+='<button type="submit" class="tlk-btn tlk-btn_gray">'+tma__sign__dict("form_login_submit")+'<span class="tlk-loadicon"></span></button>',t+="</div>",t+="</div>",t+="</form>",t+='<div class="tlk-form__wrap-links">',window.tildaMembers.settingStyles&&window.tildaMembers.settingStyles.allowselfreg&&(t+='<a href="https://avorganics.ru/members/signup/group/a21ybgywdnpgzkv-licnyj-kabinet" class="tlk-form__link" data-route>'+tma__sign__dict("form_login_link_signup")+"</a>"),t+='<a href="/members/recover-password" class="tlk-form__link" data-route>'+tma__sign__dict("form_login_link_rec")+"</a>",t+="</div>",t+="</div>",t+="</div>"}function tma__sign__getSignupHtml(){var t="";return t+='<div class="tlk-form__container">',t+='<div class="tlk-form__title">'+tma__sign__dict("form_signup_title")+"</div>",t+='<div class="tlk-form__sup-text"></div>',t+='<form method="post" id="form-signup" action="/">',t+='<div class="tlk-form__wrap">',t+='<div class="tlk-form__item">',t+='<div class="tlk-input-title">'+tma__sign__dict("form_signup_field_name")+"</div>",t+='<input type="text" name="name" placeholder="'+tma__sign__dict("form_signup_placeholder_name")+'" class="tlk-input" required>',t+='<div class="tlk-input-error"></div>',t+="</div>",t+='<div class="tlk-form__item">',t+='<div class="tlk-input-title">'+tma__sign__dict("form_signup_field_email")+"</div>",t+='<input type="email" name="login" placeholder="'+tma__sign__dict("form_signup_placeholder_email")+'" class="tlk-input" required>',t+='<div class="tlk-input-error"></div>',t+="</div>",t+='<div class="tlk-form__item">',t+='<div class="tlk-input-title">'+tma__sign__dict("form_signup_field_password")+"</div>",t+='<input type="password" name="password" placeholder="'+tma__sign__dict("form_signup_placeholder_password")+'" class="tlk-input" required>',t+='<div class="tlk-input-error"></div>',t+='<div class="tlk-password-toggle">',t+='<svg class="tlk-password-toggle__visible-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 21.5 12.9" style="enable-background:new 0 0 21.5 12.9;" xml:space="preserve">',t+='<path class="st0" d="M0.8,6.5c0,0,3.5,4.8,10,4.8s10-4.8,10-4.8s-3.5-4.8-10-4.8S0.8,6.5,0.8,6.5z" fill="none" stroke="#777777" stroke-miterlimit="10"></path>',t+='<circle class="st1" cx="10.8" cy="6.5" r="2.5" fill="#777777" stroke="#777777" stroke-miterlimit="10"></circle>',t+="</svg>",t+='<svg class="tlk-password-toggle__hidden-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 21.5 12.9" style="enable-background:new 0 0 21.5 12.9;" xml:space="preserve">',t+='<path class="st0" fill="none" stroke="#777777" stroke-miterlimit="10" d="M0.8,6.5c0,0,3.5,4.8,10,4.8s10-4.8,10-4.8s-3.5-4.8-10-4.8S0.8,6.5,0.8,6.5z"></path>',t+='<circle class="st0" fill="none" stroke="#777777" stroke-miterlimit="10" cx="10.8" cy="6.5" r="2.5"></circle>',t+='<line class="st0" fill="none" stroke="#777777" stroke-miterlimit="10" x1="4.8" y1="12.5" x2="16.8" y2="0.5"></line>',t+="</svg>",t+="</div>",t+="</div>",t+="</div>",t+='<div class="tlk-input-error tlk-input-error_all"></div>',t+='<div class="tlk-form__submit-wrap">',t+='<div class="tlk-form__submit-btn">',t+='<button type="submit" class="tlk-btn tlk-btn_gray">'+tma__sign__dict("form_signup_submit")+'<span class="tlk-loadicon"></span></button>',t+="</div>",t+="</div>",window.tildaMembers.settingStyles&&window.tildaMembers.settingStyles.registrationpage&&window.tildaMembers.settingStyles.registrationpage.agreement_link&&(t+='<div class="tlk-form__sub-text">',t+=window.tildaMembers.settingStyles.registrationpage.agreement_link,t+="</div>"),t+='<div class="tlk-form__wrap-links">',t+='<a href="/members/login" id="action-enter" class="tlk-form__link" data-route>'+tma__sign__dict("form_signup_link_log")+"</a>",t+="</div>",t+="</form>",t+="</div>",t+="</div>"}function tma__sign__getRecoverPasswordHtml(){var t="";return t+='<div class="tlk-form__container">',t+='<div class="tlk-form__title">'+tma__sign__dict("form_rec_password_title")+"</div>",t+='<div class="tlk-form__descr">'+tma__sign__dict("form_rec_password_description")+"</div>",t+='<form method="post" id="form-recover-password" action="/">',t+='<div class="tlk-form__wrap">',t+='<div class="tlk-form__item">',t+='<input type="email" name="login" placeholder="'+tma__sign__dict("form_rec_password_placeholder_email")+'" class="tlk-input" required>',t+='<div class="tlk-input-error"></div>',t+="</div>",t+="</div>",t+='<div class="tlk-input-error tlk-input-error_all">Error text</div>',t+='<div class="tlk-form__submit-wrap">',t+='<div class="tlk-form__submit-btn">',t+='<button type="submit" class="tlk-btn tlk-btn_gray">'+tma__sign__dict("form_rec_password_submit")+'<span class="tlk-loadicon"></span></button>',t+="</div>",t+="</div>",t+="</form>",t+='<div class="tlk-form__wrap-links">',t+='<a href="/members/login" class="tlk-form__link" data-route>'+tma__sign__dict("form_rec_password_link_log")+"</a>",window.tildaMembers.settingStyles&&window.tildaMembers.settingStyles.allowselfreg&&(t+='<a href="https://avorganics.ru/members/signup/group/a21ybgywdnpgzkv-licnyj-kabinet" class="tlk-form__link" data-route>'+tma__sign__dict("form_rec_password_link_signup")+"</a>"),t+="</div>",t+="</div>"}function tma__sign__getRecoverPasswordSuccessHtml(){var t="";return t+='<div class="tlk-form__container tlk-form__recovery-success">',t+='<div class="tlk-form__descr">'+tma__sign__dict("form_rec_password_ok_description")+"</div>",t+='<div class="tlk-form__title">'+tma__sign__dict("form_rec_password_ok_text")+"</div>",t+='<div class="tlk-form__submit-wrap">',t+='<div class="tlk-form__submit-btn">',t+='<a href="/members/login" class="tlk-btn tlk-btn_gray tlk-btn_link" data-route>'+tma__sign__dict("form_rec_password_link_log")+"</a>",t+="</div>",t+="</div>",t+="</div>"}function tma__sign__drawRecaptcha(){document.getElementById("allrecords").insertAdjacentHTML("beforeend",tma__sign__getRecaptchaHtml());var t=document.querySelector(".tlk-recaptcha");t.querySelector(".tlk-recaptcha__close").addEventListener("click",function(){tma__sign__сloseRecaptcha(t)})}function tma__sign__getRecaptchaHtml(){return'<div class="tlk-recaptcha"><button type="button" class="tlk-recaptcha__close"></button><iframe class="tlk-recaptcha__reg-captcha" src="https://members2.tildacdn.com/api/getrecaptcha/"></iframe></div>'}function tma__sign__сloseRecaptcha(t){t.remove()}function tma__sign__drawBGSign(t){var e,i,r,s,a,_,o=t.registrationpage;o&&(document.getElementById("allrecords").insertAdjacentHTML("beforeend",'<div class="tlk-bg-filter"></div>'),e=document.querySelector(".tlk-bg-filter"),i=o.background_image,r=+o.gradient_start_color_opacity/100||1,s=o.gradient_start_color,a=+o.gradient_end_color_opacity/100||1,_=o.gradient_end_color,o=t="",s&&(t="rgba("+tma__sign__hexToRgb(s).join(", ")+", "+r+")"),_&&(o="rgba("+tma__sign__hexToRgb(_).join(", ")+", "+a+")"),i?(e.style.backgroundImage="url("+i+")",(t||o)&&(e.innerHTML='<div class="tlk-bg-filter__bg" style="background-image: linear-gradient(to bottom, '+(t||o)+", "+(o||t)+');"</div>')):e.style.backgroundImage="linear-gradient(to bottom, "+(t||o)+", "+(o||t)+")")}function tma__sign__hexToRgb(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,r){return e+e+i+i+r+r});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),t=e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null;return e?[t.r,t.g,t.b]:null}function tma__sign__addButtonShowHidePasswordEvents(){for(var t=document.querySelectorAll(".tlk-password-toggle"),e=0;e<t.length;e++)t[e].addEventListener("click",function(){var t=this.parentNode.querySelector("input");this.classList.toggle("tlk-password-toggle__show"),this.classList.contains("tlk-password-toggle__show")?t.setAttribute("type","text"):t.setAttribute("type","password")})}
function tma__sign__addRouteEvents(t,e){for(var i=(t=t||document).querySelectorAll("a[data-route]"),r=0;r<i.length;r++)i[r].addEventListener("click",
	function(t){t.preventDefault();t=t.target.href;window.history.pushState({route:t},e,t),tma__initMembers()});tildaMembers.is_init_popstate_event||(window.addEventListener("popstate",
		function(t){t=t.state.route;(t.indexOf("login")||t.indexOf("#popup")||t.indexOf("recover-password"))&&tma__sign__init((t=t.split("/members/"))[1])}),tildaMembers.is_init_popstate_event=!0)}
